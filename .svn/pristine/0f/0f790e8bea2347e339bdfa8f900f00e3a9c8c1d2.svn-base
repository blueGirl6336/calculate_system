package com.cesystem.web;

import java.util.Locale;
import java.util.Map;

import org.springframework.web.servlet.View;
import org.springframework.web.servlet.ViewResolver;

public class MultiViewResover implements ViewResolver {  
  
    private Map<String, ViewResolver> resolvers;  
  
    @Override  
    public View resolveViewName(String viewName, Locale locale)  
            throws Exception {  
        int n = viewName.lastIndexOf("."); // è·å–  
                                            // viewName(modelAndViewä¸­çš„åå­—)çœ‹å…¶æœ‰æ²¡æœ‰ä¸‹åˆ’çº¿  
        String suffix = "jsp";
        if (n != (-1))  {
        	// æœ‰çš„è¯æˆªå–ä¸‹åˆ’çº¿åé¢çš„å­—ç¬¦ä¸² è¿™é‡Œä¸?ˆ¬æ˜¯jsp,ftl,vmä¸é…ç½®æ–‡ä»¶ä¸­çš?entry key="ftl">çš„keyåŒ¹é…  
        	suffix = viewName.substring(n + 1); 
        	// å?å‰é¢çš„éƒ¨åˆ?é‚£æ—¶çœŸæ­£çš„èµ„æºå.æ¯”å¦‚æˆ‘ä»¬è¦ä½¿ç”¨hello.jsp é‚£viewNameå°±åº”è¯¥æ˜¯hello  
            viewName = viewName.substring(0, n);  
        }
        // æ ¹æ®.åé¢çš„å­—ç¬¦ä¸²å»è·å–æ‰˜ç®¡çš„è§†å›¾è§£æç±»å¯¹è±? 
        ViewResolver resolver = resolvers.get(suffix);  
        
        if (resolver != null)  
            return resolver.resolveViewName(viewName, locale);  
        return null;  
    }  
  
    public Map<String, ViewResolver> getResolvers() {  
        return resolvers;  
    }  
  
    public void setResolvers(Map<String, ViewResolver> resolvers) {  
        this.resolvers = resolvers;  
    }  
}  